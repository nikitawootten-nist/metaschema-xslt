<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" type="text/css" href="file:/C:/Users/wap1/AppData/Roaming/com.oxygenxml/extensions/v22.1/frameworks/https_www.oxygenxml.com_InstData_Addons_community_updateSite.xml/xspec.support-2.0.0/oxygen-results-view/test-report.css"><script type="text/javascript" src="file:/C:/Users/wap1/AppData/Roaming/com.oxygenxml/extensions/v22.1/frameworks/https_www.oxygenxml.com_InstData_Addons_community_updateSite.xml/xspec.support-2.0.0/oxygen-results-view/test-report.js"></script></head>
   <body>
      <div class="testsuite" data-name="Working metaschema" id="xcc296a29-d77e-3891-8833-e95d8d64c2a4" data-xspec="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/collect.xspec" data-tests="1" data-failures="1">
         <p style="margin:0px;"><span>Working metaschema</span><span>&nbsp;</span><a class="button" onclick="runScenario(this)">Run</a></p>
         <div class="testcase" data-name="Modules collected, no loops">
            <p class="failed"><span class="test-failed" onclick="toggleResult(this)">Modules collected, no loops</span><span>&nbsp;</span><a class="button" onclick="showTest(this)">Show</a><span>&nbsp;</span><a class="button" onclick="toggleResult(this)">Q-Diff</a><span>&nbsp;</span><a class="button" onclick="showDiff(this)">Diff</a></p>
            <div class="failure" id="xcc296a29-d77e-3891-8833-e95d8d64c2a4-expect1" style="display:none;">
               <table class="xspecResult">
                  <thead>
                     <tr>
                        <th style="font-size:14px;">Result</th>
                        <th style="font-size:14px;">Expected</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"oscal-test"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/working_metaschema.xml"</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">OSCAL TEST Format</span>&lt;/schema-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-version</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">0.0</span>&lt;/schema-version&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">oscal-test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">namespace</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">http://csrc.nist.gov/ns/metaschema/test</span>&lt;/namespace&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">remarks</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">p</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">For exercising Metaschema semantics with respect to modular assembly and composition.</span>&lt;/p&gt;
   &lt;/remarks&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">abstract</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"yes"</span>
               <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"oscal-test-m1"</span>
               <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/module_metaschema.xml"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">OSCAL TEST Format Module</span>&lt;/schema-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-version</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">0.0</span>&lt;/schema-version&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">oscal-test-m1</span>&lt;/short-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">namespace</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">http://csrc.nist.gov/ns/metaschema/test</span>&lt;/namespace&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"module-assembly"</span>
                       <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1"</span>
                       <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-module-assembly"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Assembly defined in a module</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-flag"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag defined inline</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-flag&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span> /&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"local-field"</span> /&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-field"</span>&gt;
               &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
               &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
            &lt;/define-field&gt;
         &lt;/model&gt;
      &lt;/define-assembly&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-global-field"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test-m1' (global by default)</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-field&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"local-field"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-local-field"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test-m1' as local</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">ZZZ</span>&lt;/description&gt;
      &lt;/define-field&gt;
   &lt;/METASCHEMA&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-root"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Nominal root</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag defined inline on root-assembly</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field defined inline on root-assembly</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-global-field"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined at top level (global by default)</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-local-field"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test' at top level as 'local'</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-flag"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-global-flag"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag, defined globally</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
   &lt;/define-flag&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"oscal-test"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"..."</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">OSCAL TEST Format</span>&lt;/schema-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-version</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">0.0</span>&lt;/schema-version&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">oscal-test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">namespace</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">http://csrc.nist.gov/ns/metaschema/test</span>&lt;/namespace&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">remarks</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">p</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">For exercising Metaschema semantics with respect to modular assembly and composition.</span>&lt;/p&gt;
   &lt;/remarks&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">abstract</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"yes"</span>
               <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"oscal-test-m1"</span>
               <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"..."</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">OSCAL TEST Format Module</span>&lt;/schema-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">schema-version</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">0.0</span>&lt;/schema-version&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">oscal-test-m1</span>&lt;/short-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">namespace</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">http://csrc.nist.gov/ns/metaschema/test</span>&lt;/namespace&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"module-assembly"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Assembly defined in a module</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-flag"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag defined inline</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-flag&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span> /&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-local-field"</span>&gt;
               &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">use-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">local-field</span>&lt;/use-name&gt;
            &lt;/field&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-field"</span>&gt;
               &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
               &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
            &lt;/define-field&gt;
         &lt;/model&gt;
      &lt;/define-assembly&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test-m1' (global by default)</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-field&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-local-field"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test-m1' as local</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">ZZZ</span>&lt;/description&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">use-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">local-field</span>&lt;/use-name&gt;
      &lt;/define-field&gt;
   &lt;/METASCHEMA&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Nominal root</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag defined inline on root-assembly</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-local-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">use-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">local-field</span>&lt;/use-name&gt;
         &lt;/field&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"inline-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field defined inline on root-assembly</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-field"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined at top level (global by default)</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Field, defined in module 'oscal-test' at top level as 'local'</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">use-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="diff">local-field</span>&lt;/use-name&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"global-flag"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Flag, defined globally</span>&lt;/formal-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
   &lt;/define-flag&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <pre class="embeded.diff.data" style="display:none;"><div class="embeded.diff.result" style="white-space:pre;">
&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" module="oscal-test" src="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/working_metaschema.xml"&gt;
   &lt;schema-name&gt;OSCAL TEST Format&lt;/schema-name&gt;
   &lt;schema-version&gt;0.0&lt;/schema-version&gt;
   &lt;short-name&gt;oscal-test&lt;/short-name&gt;
   &lt;namespace&gt;http://csrc.nist.gov/ns/metaschema/test&lt;/namespace&gt;
   &lt;remarks&gt;
      &lt;p&gt;For exercising Metaschema semantics with respect to modular assembly and composition.&lt;/p&gt;
   &lt;/remarks&gt;
   &lt;METASCHEMA abstract="yes" module="oscal-test-m1" src="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/module_metaschema.xml"&gt;
      &lt;schema-name&gt;OSCAL TEST Format Module&lt;/schema-name&gt;
      &lt;schema-version&gt;0.0&lt;/schema-version&gt;
      &lt;short-name&gt;oscal-test-m1&lt;/short-name&gt;
      &lt;namespace&gt;http://csrc.nist.gov/ns/metaschema/test&lt;/namespace&gt;
      &lt;define-assembly name="module-assembly" module="oscal-test-m1" key-name="oscal-test-m1-module-assembly"&gt;
         &lt;formal-name&gt;Assembly defined in a module&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
         &lt;define-flag name="inline-flag"&gt;
            &lt;formal-name&gt;Flag defined inline&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-flag&gt;
         &lt;model&gt;
            &lt;field ref="global-field"/&gt;
            &lt;field ref="local-field"/&gt;
            &lt;define-field name="inline-field"&gt;
               &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
               &lt;description&gt;XXX&lt;/description&gt;
            &lt;/define-field&gt;
         &lt;/model&gt;
      &lt;/define-assembly&gt;
      &lt;define-field name="global-field" module="oscal-test-m1" key-name="oscal-test-m1-global-field"&gt;
         &lt;formal-name&gt;Field, defined in module 'oscal-test-m1' (global by default)&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-field&gt;
      &lt;define-field name="local-field" scope="local" module="oscal-test-m1" key-name="oscal-test-m1-local-field"&gt;
         &lt;formal-name&gt;Field, defined in module 'oscal-test-m1' as local&lt;/formal-name&gt;
         &lt;description&gt;ZZZ&lt;/description&gt;
      &lt;/define-field&gt;
   &lt;/METASCHEMA&gt;
   &lt;define-assembly name="root" module="oscal-test" key-name="oscal-test-root"&gt;
      &lt;formal-name&gt;Nominal root&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="global-flag"/&gt;
      &lt;define-flag name="inline-flag"&gt;
         &lt;formal-name&gt;Flag defined inline on root-assembly&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="global-field"/&gt;
         &lt;field ref="local-field"/&gt;
         &lt;define-field name="inline-field"&gt;
            &lt;formal-name&gt;Field defined inline on root-assembly&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="global-field" module="oscal-test" key-name="oscal-test-global-field"&gt;
      &lt;formal-name&gt;Field, defined at top level (global by default)&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;define-field name="local-field" scope="local" module="oscal-test" key-name="oscal-test-local-field"&gt;
      &lt;formal-name&gt;Field, defined in module 'oscal-test' at top level as 'local'&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;define-flag name="global-flag" module="oscal-test" key-name="oscal-test-global-flag"&gt;
      &lt;formal-name&gt;Flag, defined globally&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
   &lt;/define-flag&gt;
&lt;/METASCHEMA&gt;
</div><div class="embeded.diff.expected" style="white-space:pre;">
&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" module="oscal-test" src="..."&gt;
   &lt;schema-name&gt;OSCAL TEST Format&lt;/schema-name&gt;
   &lt;schema-version&gt;0.0&lt;/schema-version&gt;
   &lt;short-name&gt;oscal-test&lt;/short-name&gt;
   &lt;namespace&gt;http://csrc.nist.gov/ns/metaschema/test&lt;/namespace&gt;
   &lt;remarks&gt;
      &lt;p&gt;For exercising Metaschema semantics with respect to modular assembly and composition.&lt;/p&gt;
   &lt;/remarks&gt;
   &lt;METASCHEMA abstract="yes" module="oscal-test-m1" src="..."&gt;
      &lt;schema-name&gt;OSCAL TEST Format Module&lt;/schema-name&gt;
      &lt;schema-version&gt;0.0&lt;/schema-version&gt;
      &lt;short-name&gt;oscal-test-m1&lt;/short-name&gt;
      &lt;namespace&gt;http://csrc.nist.gov/ns/metaschema/test&lt;/namespace&gt;
      &lt;define-assembly name="module-assembly"&gt;
         &lt;formal-name&gt;Assembly defined in a module&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
         &lt;define-flag name="inline-flag"&gt;
            &lt;formal-name&gt;Flag defined inline&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-flag&gt;
         &lt;model&gt;
            &lt;field ref="global-field"/&gt;
            &lt;field ref="oscal-test-m1-local-field"&gt;
               &lt;use-name&gt;local-field&lt;/use-name&gt;
            &lt;/field&gt;
            &lt;define-field name="inline-field"&gt;
               &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
               &lt;description&gt;XXX&lt;/description&gt;
            &lt;/define-field&gt;
         &lt;/model&gt;
      &lt;/define-assembly&gt;
      &lt;define-field name="global-field"&gt;
         &lt;formal-name&gt;Field, defined in module 'oscal-test-m1' (global by default)&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-field&gt;
      &lt;define-field name="oscal-test-m1-local-field" scope="local"&gt;
         &lt;formal-name&gt;Field, defined in module 'oscal-test-m1' as local&lt;/formal-name&gt;
         &lt;description&gt;ZZZ&lt;/description&gt;
         &lt;use-name&gt;local-field&lt;/use-name&gt;
      &lt;/define-field&gt;
   &lt;/METASCHEMA&gt;
   &lt;define-assembly name="root"&gt;
      &lt;formal-name&gt;Nominal root&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="global-flag"/&gt;
      &lt;define-flag name="inline-flag"&gt;
         &lt;formal-name&gt;Flag defined inline on root-assembly&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="global-field"/&gt;
         &lt;field ref="oscal-test-local-field"&gt;
            &lt;use-name&gt;local-field&lt;/use-name&gt;
         &lt;/field&gt;
         &lt;define-field name="inline-field"&gt;
            &lt;formal-name&gt;Field defined inline on root-assembly&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="global-field"&gt;
      &lt;formal-name&gt;Field, defined at top level (global by default)&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
   &lt;/define-field&gt;
   &lt;define-field name="oscal-test-local-field" scope="local"&gt;
      &lt;formal-name&gt;Field, defined in module 'oscal-test' at top level as 'local'&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
      &lt;use-name&gt;local-field&lt;/use-name&gt;
   &lt;/define-field&gt;
   &lt;define-flag name="global-flag"&gt;
      &lt;formal-name&gt;Flag, defined globally&lt;/formal-name&gt;
      &lt;description&gt;XXX&lt;/description&gt;
   &lt;/define-flag&gt;
&lt;/METASCHEMA&gt;
</div></pre>
         </div>
      </div>
      <div class="testsuite" data-name="Metaschema skeleton" id="x8efdb0ab-cc60-3208-b7e9-25b5a0cb1b08" data-xspec="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/collect.xspec" data-tests="1" data-failures="1">
         <p style="margin:0px;"><span>Metaschema skeleton</span><span>&nbsp;</span><a class="button" onclick="runScenario(this)">Run</a></p>
         <div class="testcase" data-name="Modules collected, no loops">
            <p class="failed"><span class="test-failed" onclick="toggleResult(this)">Modules collected, no loops</span><span>&nbsp;</span><a class="button" onclick="showTest(this)">Show</a><span>&nbsp;</span><a class="button" onclick="toggleResult(this)">Q-Diff</a><span>&nbsp;</span><a class="button" onclick="showDiff(this)">Diff</a></p>
            <div class="failure" id="x8efdb0ab-cc60-3208-b7e9-25b5a0cb1b08-expect1" style="display:none;">
               <table class="xspecResult">
                  <thead>
                     <tr>
                        <th style="font-size:14px;">Result</th>
                        <th style="font-size:14px;">Expected</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:opr="http://csrc.nist.gov/ns/oscal/profile-resolution"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns trivial">xmlns:x="http://www.jenitennison.com/xslt/xspec"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"test"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/xspec/collect-compiled.xsl"</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-root"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined flag</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-global-field"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-flag"</span> /&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:opr="http://csrc.nist.gov/ns/oscal/profile-resolution"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns trivial">xmlns:x="http://www.jenitennison.com/xslt/xspec"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"..."</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"test"</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"oscal-test-m1-module-assembly"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined flag</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <pre class="embeded.diff.data" style="display:none;"><div class="embeded.diff.result" style="white-space:pre;">&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" module="test" src="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/xspec/collect-compiled.xsl"&gt;
   &lt;short-name&gt;test&lt;/short-name&gt;
   &lt;define-assembly name="root" module="test" key-name="test-root"&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="top-level-flag"/&gt;
      &lt;define-flag name="local-flag"&gt;
         &lt;formal-name&gt;Locally defined flag&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="top-level-global-field"/&gt;
         &lt;field ref="top-level-local-field"/&gt;
         &lt;define-field name="local-field"&gt;
            &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="top-level-global-field" module="test" key-name="test-top-level-global-field"/&gt;
   &lt;define-field name="top-level-local-field" scope="local" module="test" key-name="test-top-level-local-field"/&gt;
   &lt;define-flag name="top-level-flag" module="test" key-name="test-top-level-flag"/&gt;
&lt;/METASCHEMA&gt;</div><div class="embeded.diff.expected" style="white-space:pre;">&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" src="..." module="test"&gt;
   &lt;short-name&gt;test&lt;/short-name&gt;
   &lt;define-assembly name="root" module="oscal-test-m1" key-name="oscal-test-m1-module-assembly"&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="top-level-flag"/&gt;
      &lt;define-flag name="local-flag"&gt;
         &lt;formal-name&gt;Locally defined flag&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="top-level-global-field"/&gt;
         &lt;field ref="test-top-level-local-field"/&gt;
         &lt;define-field name="local-field"&gt;
            &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="top-level-global-field"/&gt;
   &lt;define-field name="test-top-level-local-field" scope="local"/&gt;
   &lt;define-flag name="top-level-flag"/&gt;
&lt;/METASCHEMA&gt;</div></pre>
         </div>
      </div>
      <div class="testsuite" data-name="Nested locals" id="x16239f4e-3fbc-3d44-b2ea-59eeef5b42ff" data-xspec="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/collect.xspec" data-tests="1" data-failures="1">
         <p style="margin:0px;"><span>Nested locals</span><span>&nbsp;</span><a class="button" onclick="runScenario(this)">Run</a></p>
         <div class="testcase" data-name="Local definitions preserved with amended names">
            <p class="failed"><span class="test-failed" onclick="toggleResult(this)">Local definitions preserved with amended names</span><span>&nbsp;</span><a class="button" onclick="showTest(this)">Show</a><span>&nbsp;</span><a class="button" onclick="toggleResult(this)">Q-Diff</a><span>&nbsp;</span><a class="button" onclick="showDiff(this)">Diff</a></p>
            <div class="failure" id="x16239f4e-3fbc-3d44-b2ea-59eeef5b42ff-expect1" style="display:none;">
               <table class="xspecResult">
                  <thead>
                     <tr>
                        <th style="font-size:14px;">Result</th>
                        <th style="font-size:14px;">Expected</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:opr="http://csrc.nist.gov/ns/oscal/profile-resolution"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns trivial">xmlns:x="http://www.jenitennison.com/xslt/xspec"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"test"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/xspec/collect-compiled.xsl"</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-root"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined flag</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-assembly"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-global-field"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Included twice</span>&lt;/formal-name&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-assembly"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-assembly"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"top-level-local-assembly"</span> /&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test"</span>
                <span xmlns="http://www.w3.org/1999/xhtml" class="diff">key-name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-flag"</span> /&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                        <td>
                           <pre>&lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">METASCHEMA</span> <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns">xmlns:opr="http://csrc.nist.gov/ns/oscal/profile-resolution"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="xmlns trivial">xmlns:x="http://www.jenitennison.com/xslt/xspec"</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">src</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"..."</span>
            <span xmlns="http://www.w3.org/1999/xhtml" class="same">module</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"test"</span>&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">short-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">test</span>&lt;/short-name&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"root"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">root-assembly</span>&lt;/root-name&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-flag"</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined flag</span>&lt;/formal-name&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-assembly"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local-field"</span>&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Locally defined field</span>&lt;/formal-name&gt;
            &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">description</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">XXX</span>&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-global-field"</span> /&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span>
                 <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">formal-name</span>&gt;<span xmlns="http://www.w3.org/1999/xhtml" class="same">Included twice</span>&lt;/formal-name&gt;
   &lt;/define-field&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-assembly"</span>
                    <span xmlns="http://www.w3.org/1999/xhtml" class="same">scope</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"local"</span>&gt;
      &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">model</span>&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">field</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-field"</span> /&gt;
         &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">assembly</span> <span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">ref</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="diff">"test-top-level-local-assembly"</span> /&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;<span xmlns="http://www.w3.org/1999/xhtml" class="inner-diff">define-flag</span> <span xmlns="http://www.w3.org/1999/xhtml" class="same">name</span>=<span xmlns="http://www.w3.org/1999/xhtml" class="same">"top-level-flag"</span> /&gt;
&lt;/METASCHEMA&gt;</pre>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <pre class="embeded.diff.data" style="display:none;"><div class="embeded.diff.result" style="white-space:pre;">&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" module="test" src="file:/C:/Users/wap1/Documents/usnistgov/OSCAL/build/metaschema/toolchains/xslt-M4/compose/testing/1_collected/xspec/collect-compiled.xsl"&gt;
   &lt;short-name&gt;test&lt;/short-name&gt;
   &lt;define-assembly name="root" module="test" key-name="test-root"&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="top-level-flag"/&gt;
      &lt;define-flag name="local-flag"&gt;
         &lt;formal-name&gt;Locally defined flag&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="top-level-global-field"/&gt;
         &lt;field ref="top-level-local-field"/&gt;
         &lt;assembly ref="top-level-local-assembly"/&gt;
         &lt;define-field name="local-field"&gt;
            &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="top-level-global-field" module="test" key-name="test-top-level-global-field"/&gt;
   &lt;define-field name="top-level-local-field" scope="local" module="test" key-name="test-top-level-local-field"&gt;
      &lt;formal-name&gt;Included twice&lt;/formal-name&gt;
   &lt;/define-field&gt;
   &lt;define-assembly name="top-level-local-assembly" scope="local" module="test" key-name="test-top-level-local-assembly"&gt;
      &lt;model&gt;
         &lt;field ref="top-level-local-field"/&gt;
         &lt;assembly ref="top-level-local-assembly"/&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-flag name="top-level-flag" module="test" key-name="test-top-level-flag"/&gt;
&lt;/METASCHEMA&gt;</div><div class="embeded.diff.expected" style="white-space:pre;">&lt;METASCHEMA xmlns="http://csrc.nist.gov/ns/oscal/metaschema/1.0" src="..." module="test"&gt;
   &lt;short-name&gt;test&lt;/short-name&gt;
   &lt;define-assembly name="root"&gt;
      &lt;root-name&gt;root-assembly&lt;/root-name&gt;
      &lt;flag ref="top-level-flag"/&gt;
      &lt;define-flag name="local-flag"&gt;
         &lt;formal-name&gt;Locally defined flag&lt;/formal-name&gt;
         &lt;description&gt;XXX&lt;/description&gt;
      &lt;/define-flag&gt;
      &lt;model&gt;
         &lt;field ref="top-level-global-field"/&gt;
         &lt;field ref="test-top-level-local-field"/&gt;
         &lt;assembly ref="test-top-level-local-assembly"/&gt;
         &lt;define-field name="local-field"&gt;
            &lt;formal-name&gt;Locally defined field&lt;/formal-name&gt;
            &lt;description&gt;XXX&lt;/description&gt;
         &lt;/define-field&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-field name="top-level-global-field"/&gt;
   &lt;define-field name="test-top-level-local-field" scope="local"&gt;
      &lt;formal-name&gt;Included twice&lt;/formal-name&gt;
   &lt;/define-field&gt;
   &lt;define-assembly name="test-top-level-local-assembly" scope="local"&gt;
      &lt;model&gt;
         &lt;field ref="test-top-level-local-field"/&gt;
         &lt;assembly ref="test-top-level-local-assembly"/&gt;
      &lt;/model&gt;
   &lt;/define-assembly&gt;
   &lt;define-flag name="top-level-flag"/&gt;
&lt;/METASCHEMA&gt;</div></pre>
         </div>
      </div>
   </body>
</html>